export function normalizeBaseUrl(raw) {
    const trimmed = typeof raw === "string" ? raw.trim() : "";
    return trimmed.length > 0 ? trimmed : null;
}
export function isOpenRouterBaseUrl(baseUrl) {
    try {
        return new URL(baseUrl).host.toLowerCase().includes("openrouter.ai");
    }
    catch {
        return /openrouter\.ai/i.test(baseUrl);
    }
}
export function resolveConfiguredBaseUrl({ envValue, configValue, }) {
    const normalizedEnv = normalizeBaseUrl(envValue);
    if (normalizedEnv)
        return normalizedEnv;
    return normalizeBaseUrl(configValue);
}
export function resolveOpenAiWhisperBaseUrl({ explicitBaseUrl, env, allowOpenRouterFallback = false, defaultBaseUrl = "https://api.openai.com/v1", }) {
    const explicit = normalizeBaseUrl(explicitBaseUrl);
    if (explicit)
        return explicit;
    const effectiveEnv = env ?? process.env;
    const whisperBaseUrl = normalizeBaseUrl(effectiveEnv.OPENAI_WHISPER_BASE_URL);
    if (whisperBaseUrl)
        return whisperBaseUrl;
    const openaiBaseUrl = normalizeBaseUrl(effectiveEnv.OPENAI_BASE_URL);
    if (openaiBaseUrl) {
        if (allowOpenRouterFallback || !isOpenRouterBaseUrl(openaiBaseUrl)) {
            return openaiBaseUrl;
        }
    }
    return defaultBaseUrl;
}
//# sourceMappingURL=base-url.js.map